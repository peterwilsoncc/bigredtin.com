<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" class="nojs nojswin">
<head profile="http://gmpg.org/xfn/11">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
	<title>
	Including Wordpress&#8217;s comment-reply.js (the right way)  |  Big Red Tin	</title>

	<link rel="alternate" type="application/atom+xml" title="Big Red Tin Feed" href="/feed/atom/" />
	<link rel="alternate" type="application/atom+xml" title="Big Red Tin Comments Feed" href="/comments/feed/atom/" />
	<link rel="pingback" href="/xmlrpc.php" />

	
<link rel="alternate" type="application/rss+xml" title="Big Red Tin &raquo; Including Wordpress&#8217;s comment-reply.js (the right way) Comments Feed" href="/behind-the-websites/including-wordpress-comment-reply-js/feed/" />
<link rel='stylesheet' id='yui-reset-fonts-css'  href='http://ajax.googleapis.com/ajax/libs/yui/2.7.0/build/reset-fonts/reset-fonts.css' type='text/css' media='all' />
<link rel='stylesheet' id='yui-base-css'  href='http://ajax.googleapis.com/ajax/libs/yui/2.7.0/build/base/base-min.css' type='text/css' media='all' />
<link rel='stylesheet' id='soup-all-css'  href='http://css.assets.sgiant.com/pressgiant/wp-content/themes/bigredtin/assets/child/c/all/all-min.css?ver=20100531.01' type='text/css' media='all' />
<!--[if IE 6]>
<link rel='stylesheet' id='soup-all-ie6-css'  href='http://css.assets.sgiant.com/pressgiant/wp-content/themes/bigredtin/assets/child/c/all/all-ie6-min.css?ver=20100531.01' type='text/css' media='all' />
<![endif]-->
<link rel='stylesheet' id='soup-screen-css'  href='http://css.assets.sgiant.com/pressgiant/wp-content/themes/bigredtin/assets/child/c/screen/screen-min.css?ver=20100531.01' type='text/css' media='screen, projection, handheld' />
<!--[if IE 6]>
<link rel='stylesheet' id='soup-screen-ie6-css'  href='http://css.assets.sgiant.com/pressgiant/wp-content/themes/bigredtin/assets/child/c/screen/screen-ie6-min.css?ver=20100531.01' type='text/css' media='screen, projection, handheld' />
<![endif]-->
<!--[if IE 7]>
<link rel='stylesheet' id='soup-all-ie7-css'  href='http://css.assets.sgiant.com/pressgiant/wp-content/themes/bigredtin/assets/child/c/all/all-ie7-min.css?ver=20100531.01' type='text/css' media='all' />
<![endif]-->
<!--[if IE 7]>
<link rel='stylesheet' id='soup-screen-ie7-css'  href='http://css.assets.sgiant.com/pressgiant/wp-content/themes/bigredtin/assets/child/c/screen/screen-ie7-min.css?ver=20100531.01' type='text/css' media='screen, projection, handheld' />
<![endif]-->
<link rel='stylesheet' id='soup-print-css'  href='http://css.assets.sgiant.com/pressgiant/wp-content/themes/bigredtin/assets/child/c/print/print-min.css?ver=20100531.01' type='text/css' media='print' />
<link rel='stylesheet' id='contact-form-7-css'  href='/wp-content/plugins/contact-form-7/styles.css?ver=2.2.1' type='text/css' media='all' />
<script type='text/javascript' src='http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js'></script>
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="/xmlrpc.php?rsd" />
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="/wp-includes/wlwmanifest.xml" /> 
<link rel='index' title='Big Red Tin' href='http://bigredtin.com' />
<link rel='start' title='Don&#8217;t start with a reset.css' href='/behind-the-websites/dont-start-with-a-resetcss/' />
<link rel='prev' title='Career Stats: Shane Warne the Musical (.com.au)' href='/business/career-stats-shane-warne-the-musical-comau/' />
<link rel='next' title='How to get 4.3 stars for customer service!' href='/business/get-4-3-stars-for-customer-service/' />
<script src='http://pressgiant.net/?dm=8d70ca7f38aacd0703e24fc11fed7234&action=load&blogid=7&siteid=1&t=288668355&back=http%3A%2F%2Fbigredtin.com%2Fwordpress%2Fincluding-wordpress-comment-reply-js%2F' type='text/javascript'></script>
<!-- All in One SEO Pack 1.6.10.2 by Michael Torbert of Semper Fi Web Design[-1,-1] -->
<meta name="description" content="Since threaded comments were enabled in Wordpress 2.7, most themes check if the visitor is browsing either a page or a post and adds the JavaScript required for threaded comments if they are. I prefer a slight variation" />
<meta name="keywords" content="comments,javascript,threaded comments,wordpress" />
<link rel="canonical" href="/behind-the-websites/including-wordpress-comment-reply-js/" />
<!-- /all in one seo pack -->
<script type="text/javascript">
//<![CDATA[
var _wpcf7 = { cached: 1 };
//]]>
</script>
<link rel="shortlink" href="http://wp.me/pWctY-2a" /><link rel="shortcut icon" type="image/x-icon" href="/wp-content/themes/bigredtin/assets/child/i/favicon.ico" />
<link rel="icon" type="image/x-icon" href="/wp-content/themes/bigredtin/assets/child/i/favicon.ico" />
</head>

<body id="brt" class="nojs nojswin bxSngl bxAllBlog bxPost bxP-including-wordpress-comment-reply-js bxP-id134 bxPC-behind-the-websites bxPTag-comments bxPTag-javascript bxPTag-threaded-comments bxPTag-wordpress bxPA-peter">
	<div id="pageWrap" class="brt">
		<div id="header">
			<div id="siteDetails">
				<p id="siteName"><a href="http://bigredtin.com"><img src="/wp-content/themes/bigredtin/assets/child/i/logo-white-24.png" class="screen" width="323" height="90" alt="Big Red Tin  | Thoughts about the web and business from the large pantry" title="Big Red Tin | Thoughts about the web and business from the large pantry" /><img src="/wp-content/themes/bigredtin/assets/child/i/logo-colour-24.png" class="print" width="323" height="90" alt="" title="" /></a></p>
			</div>
			<!-- //#siteDetails -->
			<div id="headerWidgets"><!-- no header widgets --></div>
			<!-- //#headerWidgets -->
			
		</div>
		<!-- //#header -->

	<div id="container">

		<div id="navWrap" class="navWrap"> <!-- For modern style full width menus -->
					</div> <!-- //#navWrap -->
		
		<div id="content">
						<div id="contentHeadA" class="hentry p1 post publish post-including-wordpress-comment-reply-js author-peter-wilson cat-behind-the-websites tagged tag-comments tag-javascript tag-threaded-comments tag-wordpress">
				<div id="contentHead">
					<h1 class="entry-title" id="pageName">			<a href="/behind-the-websites/including-wordpress-comment-reply-js/" title="Including Wordpress&#8217;s comment-reply.js (the right way)" rel="bookmark">
				Including Wordpress&#8217;s comment-reply.js (the right way)			</a>
		</h1>		<p class="entry-date"><span class="published" title="2009-08-14T13:15:41+10:00">14 Aug '09</span></p>
						</div>
				<!-- //#contentHead -->
				
				<div id="contentA">	
					
		<div class="entry-meta">
			<p class="details">
				<span class="author vcard">By <a class="url fn n" href="/author/peter/" title="View all posts by Peter Wilson">Peter Wilson</a></span>
				<span class="cat-links"> in <a href="/behind-the-websites/" title="View all posts in Behind the Websites" rel="category tag">Behind the Websites</a></span>
			</p>


			<p class="comments-link">
				Responses are closed							</p>
		</div>

	
	
				<div class="entry-content">
			<p>Since threaded comments were enabled in Wordpress 2.7, most themes include the following line in header.php</p>
<pre><code>&lt;?php if ( is_singular() ) wp_enqueue_script( 'comment-reply' ); ?&gt;</code></pre>
<p>This code checks if the visitor is browsing either a page or a post and adds the JavaScript required for threaded comments if they are.</p>
<p>I prefer a slight variation</p>
<pre><code>&lt;?php
if ( is_singular() AND comments_open() AND (get_option('thread_comments') == 1))
  wp_enqueue_script( 'comment-reply' );
?&gt;</code></pre>
<p>My variation checks if the visitor is browsing either a page or a post, if comments are open for the entry, and finally, if threaded comments are enabled. If all of these conditions are met, the JavaScript required for threaded comments is added.</p>
<p>If you run your wp_enqueue_script calls in functions.php, as I do, this is the code to use:</p>
<pre><code>&lt;?php
function theme_queue_js(){
  if (!is_admin()){
    if ( is_singular() AND comments_open() AND (get_option('thread_comments') == 1))
      wp_enqueue_script( 'comment-reply' );
  }
}
add_action('get_header', 'theme_queue_js');
?&gt;</code></pre>
<p>The call is added to the get_header action as <code>is_singular</code> and <code>comments_open</code> are unknown during the init action.</p>
<p><strong>Updated Aug 15</strong>: Fixed two typos in the final code sample</p>
<p><em>Props to <a onclick="javascript:pageTracker._trackPageview('/outgoing/digwp.com');" title="Digging Into Wordpress"  href="http://digwp.com">Digging Into Wordpress</a> for the &#8230;the right way&#8230; terminology:)</em></p>
		</div>
		<!-- //.entry-content -->
		<p class="tag-links entry-meta">Tagged: <a href="/tag/comments/" rel="tag">comments</a> &bull; <a href="/tag/javascript/" rel="tag">JavaScript</a> &bull; <a href="/tag/threaded-comments/" rel="tag">threaded comments</a> &bull; <a href="/tag/wordpress/" rel="tag">Wordpress</a></p>			<div id="authorDescription" class="author-description vcard">
				<img alt='' src='http://www.gravatar.com/avatar/d6fa5fdcd09cd9484ebca5c0844cc13b?s=96&amp;d=http%3A%2F%2Fbigredtin.com%2Fwp-includes%2Fimages%2Fblank.gif&amp;r=G' class='avatar avatar-96 photo' height='96' width='96' /><h2>About <cite class="fn">Peter Wilson</cite></h2><p>Peter Wilson is a Web Developer based in Melbourne, Australia. He co-founded Web Production firm <a href="http://soupgiant.com/" title="Soupgiant">Soupgiant</a> with Josh Kinal in October 2009.</p>			</div>
			
		<div id="page-nav" class="page-nav nav">
			<div class="page-nav-older"><span class="direction">Previous post: </span><a href="/business/career-stats-shane-warne-the-musical-comau/" rel="prev">Career Stats: Shane Warne the Musical (.com.au)</a></div>
			<div class="page-nav-newer"><span class="direction">Next post: </span><a href="/business/get-4-3-stars-for-customer-service/" rel="next">How to get 4.3 stars for customer service!</a></div>
		</div>
		<!-- //#page-nav -->
		<div id="comments">
				<h2>
				One Comment			</h2>
			
			<ol id="commentsList" class="commentsList">
						<li id="comment-116" class="comment even thread-even depth-1">
			<div class="comment-head">
				<p class="comment-author vcard">
					<img alt='' src='http://www.gravatar.com/avatar/364e547f7cb705fd81ddc45cf8da09f0?s=32&amp;d=http%3A%2F%2Fbigredtin.com%2Fwp-includes%2Fimages%2Fblank.gif&amp;r=G' class='avatar avatar-32 photo' height='32' width='32' />					<cite class="fn"><a href='http://www.friskdesign.com' rel='external nofollow' class='url'>Matt Hill</a></cite> <span class="says">says:</span>
				</p>
			</div>
		
			<div class="comment-body" id="c-body-116">
				<p>Very handy. I&#8217;ve been transferring my base theme from each new version of WP to the next, and didn&#8217;t realise I wasn&#8217;t including this!</p>
			</div>
			<div class="comment-footer" id="c-footer-116">
				<p class="comment-meta">
					<a href="#comment-116">September 16, 2009 at 3:31 am</a>
				
														</p>
			</div>
			</li>
			</ol>
			<!-- //#comments-list -->
			
			<div id="comment-nav" class="page-nav nav">
				<div class="page-nav-older"></div>
				<div class="page-nav-newer"></div>
			</div>
			<!-- //#comment-nav -->
			
</div>
<!--//#comments -->					
				</div>
				<!-- //#contentA -->
			</div>
			<!-- //#contentHeadA -->
			
</div>
<!-- //#content -->

<div id="contentC" class="sidebar">
	<div id="twitter-tools" class="widget aktt_widget"><h5 class="widget-title">Tasty Tweets</h5><div class="aktt_tweets">
	<ul>
		<li>Interesting piece about HTML5 and broken audio in Firefox from @<a href="http://twitter.com/adactio" class="aktt_username">adactio</a>. Is this the start of the browser hacks?  <a href="http://bit.ly/aN1Ytv" rel="nofollow">http://bit.ly/aN1Ytv</a> <a href="http://twitter.com/bigredtin/statuses/15383158115" class="aktt_tweet_time">24 mins ago</a></li>
		<li class="aktt_more_updates"><a href="http://twitter.com/bigredtin">More updates...</a></li>
</ul></div></div></div>
<!-- //#contentC .sidebar -->
			
						
		</div>
		<!-- //#container -->
		<div id="footer">

			<div id="footWidgets">		<div id="recent-posts-3" class="foot-widget widget widget_recent_entries">		<h5 class="widget-title">Recent Posts</h5>		<ul>
				<li><a href="/behind-the-websites/javascript-the-wordpress-way-part-2/" title="JavaScript the WordPress Way / Part 2">JavaScript the WordPress Way / Part 2 </a></li>
				<li><a href="/behind-the-websites/javascript-the-wordpress-way-part-1/" title="JavaScript the WordPress way / Part 1">JavaScript the WordPress way / Part 1 </a></li>
				<li><a href="/content-strategy/the-right-content-for-the-right-audience/" title="The Right Content for the Right Audience">The Right Content for the Right Audience </a></li>
				<li><a href="/behind-the-websites/rounded-corners-everywhere/" title="Rounded Corners Everywhere">Rounded Corners Everywhere </a></li>
				<li><a href="/business/thinking-more-important-than-ideas/" title="Thinking: More Important Than Ideas">Thinking: More Important Than Ideas </a></li>
				</ul>
		</div><div id="categories-3" class="foot-widget widget widget_categories"><h5 class="widget-title">Categories</h5>		<ul>
	<li class="cat-item cat-item-557"><a href="/behind-the-websites/" title="Everything to do with website coding that we can think of. Front-end, back-end, upside and down, you&#039;ll find it here. It also contains our thoughts about Content Management Systems (CMS) and all the other little and technical things.">Behind the Websites</a>
</li>
	<li class="cat-item cat-item-31"><a href="/business/" title="Producing websites is, in itself a business, but it often relates to the business of our clients. We&#039;ll try to put all of those thoughts and processes in here.">Business</a>
</li>
	<li class="cat-item cat-item-540"><a href="/content-strategy/" title="Content whosawhatnow? When producing websites it&#039;s really important to think about what information you&#039;re going to provide, how it&#039;s going to be displayed and how is it going to affect your audience. That&#039;s content strategy in a nutshell. This is where we crack that nut.">Content Strategy</a>
</li>
	<li class="cat-item cat-item-54"><a href="/design/" title="Design is so much more than just the graphics. A lot of thought goes in to how something looks, where elements are placed, what does and doesn&#039;t appear and when. You&#039;ll find that information here.">Design</a>
</li>
		</ul>
</div><div id="linkcat-530" class="foot-widget widget widget_links"><h5 class="widget-title">Subscribe to Updates</h5>
	<ul class='xoxo blogroll'>
<li><a href="http://twitter.com/bigredtin" rel="me" title="Follow Big Red Tin on Twitter">Follow us on Twitter</a></li>
<li><a href="http://feeds.soupgiant.com/bigredtin" rel="me" title="Subscribe to Big Red Tin in your feed reader">Subscribe by RSS</a></li>

	</ul>
</div>
</div>
			<!-- //#footWidgets -->

			<div id="footLegal" class="foot-widget widget widget_site_credits pho-widget">
				<h5 class="widget-title">Site Credits</h5>
				<ul>
					<li class="copyright">Copyright &copy; 2009 - 2010 <a href="http://soupgiant.com/">Soupgiant</a></li>
					<li class="credits credits-dev">Developed by <a href="http://soupgiant.com/">Soupgiant</a></li>
					<li class="credits credits-design">Design by <a href="http://zepol.com.au/">Zepol</a></li>
					<li class="powered">Inevitably powered by <a href="http://wordpress.org">WordPress</a></li>
				</ul>
			</div>
			<!-- //#footLegal -->
		</div>
		<!-- //#footer -->
	</div>
	<!-- //#pageWrap -->
<script type='text/javascript'>try{jQuery.noConflict();}catch(e){};</script>
<script type='text/javascript' src='http://js.assets.sgiant.com/pressgiant/wp-content/themes/soup02/assets/parent/j/sg-base-min.js?ver=1.1.0'></script>
<script type='text/javascript' src='http://js.assets.sgiant.com/pressgiant/wp-content/themes/bigredtin/assets/child/j/custom-min.js?ver=1.0.0'></script>
<script type='text/javascript' src='/wp-includes/js/jquery/jquery.form.js?ver=2.02m'></script>
<script type='text/javascript' src='/wp-content/plugins/contact-form-7/scripts.js?ver=2.2.1'></script>

<!-- tracker added by Ultimate Google Analytics plugin v1.6.0: http://www.oratransplant.nl/uga -->
<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
var pageTracker = _gat._getTracker("UA-11132236-2");
pageTracker._initData();
pageTracker._trackPageview();
</script>
<script src="http://stats.wordpress.com/e-201022.js" type="text/javascript"></script>
<script type="text/javascript">
st_go({blog:'13871010',v:'ext',post:'134'});
var load_cmc = function(){linktracker_init(13871010,134,2);};
if ( typeof addLoadEvent != 'undefined' ) addLoadEvent(load_cmc);
else load_cmc();
</script>
<!--[if IE 6]>
<script type='text/javascript' src='/wp-content/themes/soup02/assets/parent/j/ddbelatedpng-min.js'></script>
<script type="text/javascript">
/* <![CDATA[ */
if(typeof jQuery=="function"){jQuery(window).ready(function(){DD_belatedPNG.fix('img');});}else{DD_belatedPNG.fix('img');}
/* ]]> */
</script>
<![endif]-->
</body>
</html>