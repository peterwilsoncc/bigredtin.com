<?php
$year = '2008';
$slug = 'js-equal-height-cols bxP-id94 bxPC-behind-the-websites bxPTag-css bxPTag-javascript bxPTag-layout bxPA-peter"><div id="pageWrap" class="brt"><div id="header"><div id="siteDetails"><p id="siteName"><a href="http://bigredtin.com"><img src="/wp-content/themes/bigredtin/assets/child/i/logo-white-24.png" class="screen" width="323" height="90" alt="Big Red Tin  | Thoughts about the web and business from the large pantry" title="Big Red Tin | Thoughts about the web and business from the large pantry" /><img src="/wp-content/themes/bigredtin/assets/child/i/logo-colour-24.png" class="print" width="323" height="90" alt="" title="" /></a></p></div><div id="headerWidgets"></div></div><div id="container"><div id="navWrap" class="navWrap"></div><div id="content"><div id="contentHeadA" class="hentry p1 post publish post-js-equal-height-cols author-peter-wilson cat-behind-the-websites tagged tag-css tag-javascript tag-layout"><div id="contentHead"><h1 class="entry-title" id="pageName"> <a href="/behind-the-websites/js-equal-height-cols/" title="JavaScript Equal Height Columns" rel="bookmark"> JavaScript Equal Height Columns </a></h1><p class="entry-date"><span class="published" title="2008-12-24T12:32:16+00:00">24 Dec '08</span></p></div><div id="contentA"><div class="entry-meta"><p class="details"> <span class="author vcard">By <a class="url fn n" href="/author/peter/" title="View all posts by Peter Wilson">Peter Wilson</a></span> <span class="cat-links"> in <a href="/behind-the-websites/" title="View all posts in Behind the Websites" rel="category tag">Behind the Websites</a></span></p><p class="comments-link"> Responses are closed</p></div><div class="entry-content"><p>The desire for equal height columns in a CSS layout is nothing new; there are many solutions available, some use JavaScript, others use <a title="One True Layout" href="http://www.positioniseverything.net/articles/onetruelayout/equalheight" onclick="javascript:_gaq.push(['_trackEvent','outbound-article','www.positioniseverything.net/articles/onetruelayout/equalheight']);">CSS with negative margins</a>, and then, there&#8217;s the <a title="Faux Columns" href="http://www.alistapart.com/articles/fauxcolumns/" onclick="javascript:_gaq.push(['_trackEvent','outbound-article','www.alistapart.com/articles/fauxcolumns/']);">faux columns</a> method using background images. All of these methods have their place as perfectly valid solutions, and, depending on the situation, may be the best solution available. <span id="more-94"></span>It&#8217;s the JavaScript methods available that are the subject this article; most of the solutions available &#8211; certainly those on the first page when <a title="Google 'equal height javascript'" href="http://www.google.com.au/search?q=equal+height+javascript" onclick="javascript:_gaq.push(['_trackEvent','outbound-article','www.google.com.au/search?q=equal+height+javascript']);">googling &#8216;equal height javascript&#8217;</a> &#8211; include a variation of either of the lines below:</p><pre><code>column[i].style.height = maxHeight + 'px'; // or column[i].style.minHeight = maxHeight + 'px';</code></pre><p>The use of inline styles creates an edge case that can result in a large, ugly, gap between the equalized columns and the footer when printing the page; if footer is pushed on to an otherwise blank page it becomes wasteful.  Example 1: <a title="Layout without equalised columns" href="http://code.peterwilson.cc/js-equal-height-cols/eg1/" onclick="javascript:_gaq.push(['_trackEvent','outbound-article','code.peterwilson.cc/js-equal-height-cols/eg1/']);">Layout without equalised columns</a> Example 2: <a title="Equalised columns with traditional JavaScript" href="http://code.peterwilson.cc/js-equal-height-cols/eg2/" onclick="javascript:_gaq.push(['_trackEvent','outbound-article','code.peterwilson.cc/js-equal-height-cols/eg2/']);">Equalised columns with traditional JavaScript</a> (<a title="Print view of equalised columns with traditional JavaScript" href="http://code.peterwilson.cc/js-equal-height-cols/eg2/print-version.pdf" onclick="javascript:_gaq.push(['_trackEvent','download','code.peterwilson.cc/js-equal-height-cols/eg2/print-version.pdf']);">pdf of print view</a></p><p>)</p><h4>Basic requirements</h4><p>When deciding to write my own version of the script, rather than sending an array, or limiting the script to a certain number of columns, I decided to send the requirements as an expression, ie</p><pre><code>PWCC.equalHeights("content=sidebar");</code></pre><p>To avoid the printing problem in example 2, CSS is created dynamically and assigned to the relevant media type &#8211; in this case &#8216;screen&#8217; or &#8216;screen, handheld&#8217;. I&#8217;ve used <a title="Using dynamic CSS to hide content before page load" href="http://www.bobbyvandersluis.com/articles/dynamic_css/index.html" onclick="javascript:_gaq.push(['_trackEvent','outbound-article','www.bobbyvandersluis.com/articles/dynamic_css/index.html']);">a script by Bobby van der Sluis</a> &#8211; modified to allow the specification of the media type and moved it into my namespace &#8211; to create the CSS.</p><pre><code>function createStyleRule(selector, declaration) { //becomes PWCC.createStyleRule = function (selector, declaration, media) { if (media == null) {   media = 'screen'; }  style_node.setAttribute("media", "screen"); //becomes style_node.setAttribute("media", media);</code></pre><h4>The function</h4><p>Using the traditional version in example two, the inline styles make it necessary to loop through each column twice, first to get maximum height, and, subsequently to set the height on each element.  In the function below the use of dynamic CSS allows a class name to be created at the start of the script and applied to each column in the initial loop &#8211; very slightly reducing processing power; in the script below a random number is appended to the class name to help ensure there are no clashes with the static CSS &#8211; with a bit of care it can be removed.</p><pre><code>PWCC.equalHeight = function (expr, className, media) {   if (className == null) {     className = 'equalHeight';   }   if (media == null) {     media = 'screen'; //default   }    //split expr at = signs   var sections = expr.split("=");    //generate class name   var classRandom = Math.floor(Math.random()*999999);   className = className + '-' + classRandom;    //get column heights, add class name to html elemenets   var objects = new Array();   var maxHeight = 0;   for(var i=0; i &lt; sections.length; i++) {     objects[i] = document.getElementById(sections[i]);     PWCC.addClass(objects[i], className);     //addClass is in base.js - it adds a class to an element.      if (objects[i].offsetHeight &gt; maxHeight) {       maxHeight = objects[i].offsetHeight;     }   }    //create css declaration   var classDeclaration = 'min-height: ' + maxHeight + 'px;'   var ie6Declaration = 'height: ' + maxHeight + 'px;'   PWCC.createStyleRule('.' + className, classDeclaration, media);   PWCC.createStyleRule('* html .' + className, ie6Declaration, media); }</code></pre><p>The IE6 declaration has been made using a * html hack; I considered this a better option than the others available, browser sniffing, or, JavaScript conditional comments; others&#8217; opinions may differ and prefer to avoid the * html hack.  Finally to call the script once the page loads, add a function call to the load event</p><pre><code>PWCC.addLoadEvent(function() {   //addLoadEvent is in base.js - adds code to window.onload   PWCC.equalHeight('content=sidebar'); });</code></pre><p>The <a title="Final version of equal height columns" href="http://code.peterwilson.cc/js-equal-height-cols/eg3/" onclick="javascript:_gaq.push(['_trackEvent','outbound-article','code.peterwilson.cc/js-equal-height-cols/eg3/']);">final working version can be seen in example 3</a>, along with the <a title="Source javascript for example 3" href="http://code.peterwilson.cc/js-equal-height-cols/eg3/assets/j/custom.js.txt" onclick="javascript:_gaq.push(['_trackEvent','outbound-article','code.peterwilson.cc/js-equal-height-cols/eg3/assets/j/custom.js.txt']);">source JavaScript</a>; the function above makes calls to my <a title="Base JavaScript File" href="/index.php?p=82" >base.js</a> file.</p></div><p class="tag-links entry-meta">Tagged: <a href="/tag/css/" rel="tag">CSS</a> &bull; <a href="/tag/javascript/" rel="tag">JavaScript</a> &bull; <a href="/tag/layout/" rel="tag">layout</a></p><div id="authorDescription" class="author-description vcard"> <img alt='' src='http://1.gravatar.com/avatar/d6fa5fdcd09cd9484ebca5c0844cc13b?s=96&amp;d=http%3A%2F%2Fbigredtin.com%2Fwp-includes%2Fimages%2Fblank.gif&amp;r=G' class='avatar avatar-96 photo' height='96' width='96' /><h2>About<cite class="fn"> Peter Wilson</cite></h2><p>Peter Wilson is a Web Developer based in Melbourne, Australia. He co-founded Web Production firm <a href="http://soupgiant.com/" title="Soupgiant">Soupgiant</a> with Josh Kinal in October 2009.</p></div><div id="page-nav" class="page-nav nav"><div class="page-nav-older"><span class="direction">Previous post: </span><a href="/behind-the-websites/base-js-file/" rel="prev">Base JavaScript File</a></div><div class="page-nav-newer"><span class="direction">Next post: </span><a href="/behind-the-websites/not-dropping-ie6/" rel="next">Why I will not be dropping support for IE6</a></div></div><div id="comments"></div></div></div></div><div id="contentC" class="sidebar"><div id="search-3" class="widget widget_search"><form method="get" action="http://bigredtin.com" class="search-form"><div> <label for="s-855144" class="search-label">Search this Site</label> <input type="text" name="s" id="s-855144" class="searchInput inputText" /> <input type="submit" value="Search" class="searchSubmit inputSubmit" /></div></form></div><div id="twitter-tools" class="widget aktt_widget"><h5 class="widget-title">Tasty Tweets</h5><div class="aktt_tweets"><ul><li>RT @<a href="http://twitter.com/Japh" onclick="javascript:_gaq.push(['_trackEvent','outbound-article','twitter.com/Japh']);" class="aktt_username">Japh</a>:@bigredtin That was actually my point ;) People who argue *for* a custom CMS say it&#039;s a pro. I disagree. I think [they&#039;re] terrible <a href="http://twitter.com/bigredtin/statuses/41496593303601152" onclick="javascript:_gaq.push(['_trackEvent','outbound-article','twitter.com/bigredtin/statuses/41496593303601152']);" class="aktt_tweet_time">2 days ago</a></li><li>#<a href="http://search.twitter.com/search?q=%23wcmelb" onclick="javascript:_gaq.push(['_trackEvent','outbound-article','search.twitter.com/search?q=%23wcmelb']);" class="aktt_hashtag">wcmelb</a> re @<a href="http://twitter.com/iamjohnford" onclick="javascript:_gaq.push(['_trackEvent','outbound-article','twitter.com/iamjohnford']);" class="aktt_username">iamjohnford</a> talk, I use backwpup plugin for backups. Works on excluding files &amp; tables, many others work on including them <a href="http://twitter.com/bigredtin/statuses/41355138635403264" onclick="javascript:_gaq.push(['_trackEvent','outbound-article','twitter.com/bigredtin/statuses/41355138635403264']);" class="aktt_tweet_time">2 days ago</a></li><li>#<a href="http://search.twitter.com/search?q=%23wcmelb" onclick="javascript:_gaq.push(['_trackEvent','outbound-article','search.twitter.com/search?q=%23wcmelb']);" class="aktt_hashtag">wcmelb</a> otto&#039;s permalink post <a href="http://bit.ly/ah2xrQ" onclick="javascript:_gaq.push(['_trackEvent','outbound-article','bit.ly/ah2xrQ']);" rel="nofollow">http://bit.ly/ah2xrQ</a> <a href="http://twitter.com/bigredtin/statuses/41339528534962176" onclick="javascript:_gaq.push(['_trackEvent','outbound-article','twitter.com/bigredtin/statuses/41339528534962176']);" class="aktt_tweet_time">2 days ago</a></li><li class="aktt_more_updates"><a href="http://twitter.com/bigredtin">More updates...</a></li></ul></div></div><div id="text-4" class="widget widget_text"><h5 class="widget-title">B.R.T. by Soupgiant</h5><div class="textwidget"><p>Big Red Tin is presented by <a href="http://soupgiant.com" onclick="javascript:_gaq.push(['_trackEvent','outbound-widget','soupgiant.com']);"><strong>Soupgiant</strong></a>.</p><p>The philosophy is simple: <strong>Good content presented in the most efficient, user-friendly and accessible way possible</strong>.</p></div></div></div></div><div id="footer"><div id="footWidgets"><div id="recent-posts-3" class="foot-widget widget widget_recent_entries"><h5 class="widget-title">Recent Posts</h5><ul><li><a href="/quick-notes/guest-post-on-digwp/" title="Guest Post on Digging into WordPress">Guest Post on Digging into WordPress</a></li><li><a href="/design/details-prevent-user-paralysis/" title="Details Prevent User Paralysis">Details Prevent User Paralysis</a></li><li><a href="/quick-notes/caching-google-webfont-loader/" title="Caching Google&#8217;s WebFont Loader">Caching Google&#8217;s WebFont Loader</a></li><li><a href="/quick-notes/soupgiant-wordpress-themes-github/" title="Soupgiant WordPress themes on Github">Soupgiant WordPress themes on Github</a></li><li><a href="/behind-the-websites/html5-couldnt-do-it/" title="HTML5: I couldn&#8217;t (quite) do it">HTML5: I couldn&#8217;t (quite) do it</a></li></ul></div><div id="categories-3" class="foot-widget widget widget_categories"><h5 class="widget-title">Categories</h5><ul><li class="cat-item cat-item-557"><a href="/behind-the-websites/" title="Everything to do with website coding that we can think of. Front-end, back-end, upside and down, you&#039;ll find it here. It also contains our thoughts about Content Management Systems (CMS) and all the other little and technical things.">Behind the Websites</a></li><li class="cat-item cat-item-31"><a href="/business/" title="Producing websites is, in itself a business, but it often relates to the business of our clients. We&#039;ll try to put all of those thoughts and processes in here.">Business</a></li><li class="cat-item cat-item-540"><a href="/content-strategy/" title="Content whosawhatnow? When producing websites it&#039;s really important to think about what information you&#039;re going to provide, how it&#039;s going to be displayed and how is it going to affect your audience. That&#039;s content strategy in a nutshell. This is where we crack that nut.">Content Strategy</a></li><li class="cat-item cat-item-54"><a href="/design/" title="Design is so much more than just the graphics. A lot of thought goes in to how something looks, where elements are placed, what does and doesn&#039;t appear and when. You&#039;ll find that information here.">Design</a></li><li class="cat-item cat-item-4574"><a href="/quick-notes/" title="Just like it sounds. This is where we post clippings of interesting things we&#039;ve found (code, opinions, writings, pictures) that deal with all aspects of making the web. We found them interesting. You don&#039;t have to.">Quick Notes</a></li></ul></div><div id="linkcat-530" class="foot-widget widget widget_links"><h5 class="widget-title">Handy Links</h5><ul class='xoxo blogroll'><li><a href="/about/" rel="me" title="About Big Red Tin">About Big Red Tin</a></li><li><a href="http://twitter.com/bigredtin" rel="me" title="Follow Big Red Tin on Twitter" target="" onclick="javascript:_gaq.push(['_trackEvent','outbound-blogroll','http://twitter.com/bigredtin']);">Follow us on Twitter</a></li><li><a href="/contact" rel="me" title="Get in Contact">Get in Contact</a></li><li><a href="http://feeds.soupgiant.com/bigredtin" rel="me" title="Subscribe to Big Red Tin in your feed reader" target="" onclick="javascript:_gaq.push(['_trackEvent','outbound-blogroll','http://feeds.soupgiant.com/bigredtin']);">Subscribe by RSS</a></li><li><a href="/plugins-themes/" rel="me">WordPress Plugins &amp; Themes</a></li></ul></div><div id="text-3" class="foot-widget widget widget_text"><h5 class="widget-title">Side Credits</h5><div class="textwidget"><ul><li class="copyright">Copyright &copy; 2009 - 2010 <a href="http://soupgiant.com/" onclick="javascript:_gaq.push(['_trackEvent','outbound-widget','soupgiant.com/']);">Soupgiant</a></li><li class="credits credits-dev">Developed by <a href="http://soupgiant.com/" onclick="javascript:_gaq.push(['_trackEvent','outbound-widget','soupgiant.com/']);">Soupgiant</a></li><li class="credits credits-design">Design by <a href="http://zepol.com.au/" onclick="javascript:_gaq.push(['_trackEvent','outbound-widget','zepol.com.au/']);">Zepol</a></li><li class="powered">Inevitably powered by <a href="http://wordpress.org" onclick="javascript:_gaq.push(['_trackEvent','outbound-widget','wordpress.org']);">WordPress</a></li></ul></div></div></div></div></div>  <script type='text/javascript'>try{jQuery.noConflict();}catch(e){};</script> <script type='text/javascript' src='/wp-content/themes/soup02/assets/parent/j/sg-base-min.js?ver=1.1.0'></script> <script type='text/javascript' src='/wp-content/themes/bigredtin/assets/child/j/custom-min.js?ver=1.0.0'></script> <script type='text/javascript' src='/wp-content/plugins/contact-form-7/jquery.form.js?ver=2.47'></script> <script type='text/javascript' src='/wp-content/plugins/contact-form-7/scripts.js?ver=2.4.2'></script> <script src="https://stats.wordpress.com/e-201109.js" type="text/javascript"></script> <script type="text/javascript">st_go({blog:'13871010',v:'ext',post:'94'});var load_cmc=function(){linktracker_init(13871010,94,2);};if(typeof addLoadEvent!='undefined')addLoadEvent(load_cmc);else load_cmc();</script> <!--[if IE 6]> <script type='text/javascript' src='/wp-content/themes/soup02/assets/parent/j/ddbelatedpng-min.js'></script> <script type="text/javascript">if(typeof jQuery=="function"){jQuery(window).ready(function(){DD_belatedPNG.fix('img');});}else{DD_belatedPNG.fix('img');}</script> <![endif]--></body></html>  <!-- Performance optimized by W3 Total Cache. Learn more: http://www.w3-edge.com/wordpress-plugins/    Minified using disk  Page Caching using disk (enhanced)  Content Delivery Network via assets.sgiant.com/pressgiant    Served from: bigredtin.com @ 2011-02-28 19:45:05 -->