<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en-US" class="nojs nojswin"><head profile="http://gmpg.org/xfn/11"><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title> Base JavaScript File  |  Big Red Tin</title><link rel="alternate" type="application/atom+xml" title="Big Red Tin Feed" href="/feed/atom/" /><link rel="alternate" type="application/atom+xml" title="Big Red Tin Comments Feed" href="/comments/feed/atom/" /><link rel="pingback" href="/xmlrpc.php" /> <script type="text/javascript">var _gaq=_gaq||[];_gaq.push(['_setAccount','UA-11132236-2']);_gaq.push(['_setAllowAnchor',true],['_setCustomVar',1,'author','peter-wilson',3],['_setCustomVar',2,'tags','javascript',3],['_setCustomVar',3,'year','2008',3],['_trackPageview']);(function(){var ga=document.createElement('script');ga.type='text/javascript';ga.async=true;ga.src=('https:'==document.location.protocol?'https://ssl':'http://www')+'.google-analytics.com/ga.js';var s=document.getElementsByTagName('script')[0];s.parentNode.insertBefore(ga,s);})();</script> <link rel='stylesheet' id='soup-allmedia-css'  href='http://assets.sgiant.com/pressgiant/wp-content/themes/bigredtin/assets/child/c/all-media/all-media-min.css?ver=20101202.02' type='text/css' media='all' /> <!--[if IE 6]><link rel='stylesheet' id='soup-allmedia-ie6-css'  href='http://assets.sgiant.com/pressgiant/wp-content/themes/bigredtin/assets/child/c/all-media/all-media-ie6-min.css?ver=20101202.02' type='text/css' media='all' /> <![endif]--> <!--[if IE 7]><link rel='stylesheet' id='soup-allmedia-ie7-css'  href='http://assets.sgiant.com/pressgiant/wp-content/themes/bigredtin/assets/child/c/all-media/all-media-ie7-min.css?ver=20101202.02' type='text/css' media='all' /> <![endif]--><link rel='stylesheet' id='contact-form-7-css'  href='/wp-content/plugins/contact-form-7/styles.css?ver=2.4.2' type='text/css' media='all' /> <script type='text/javascript' src='http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js'></script> <link rel="EditURI" type="application/rsd+xml" title="RSD" href="/xmlrpc.php?rsd" /><link rel="wlwmanifest" type="application/wlwmanifest+xml" href="/wp-includes/wlwmanifest.xml" /><link rel='index' title='Big Red Tin' href='/' /><link rel='start' title='Don&#8217;t start with a reset.css' href='/behind-the-websites/dont-start-with-a-resetcss/' /><link rel='prev' title='Review &#8211; Everything you know about CSS is wrong!' href='/behind-the-websites/review-everything-you-know-about-css-is-wrong/' /><link rel='next' title='JavaScript Equal Height Columns' href='/behind-the-websites/js-equal-height-cols/' /><link rel='shortlink' href='/?p=82' /><meta name="description" content="Upcoming posts on JavaScript will include references to ... my base JavaScript file; [...] they?ll be detailed in this post for future reference." /><meta name="keywords" content="javascript, base, framework, tutorial, web, development" /><link rel="canonical" href="/behind-the-websites/base-js-file/" />  <script type="text/javascript">var _wpcf7={cached:1};</script> <link rel="shortcut icon" type="image/x-icon" href="http://assets.sgiant.com/pressgiant/wp-content/themes/bigredtin/assets/child/i/favicon.ico" /><link rel="icon" type="image/x-icon" href="http://assets.sgiant.com/pressgiant/wp-content/themes/bigredtin/assets/child/i/favicon.ico" /><meta name="viewport" content="width=device-width, initial-scale=1.0"></head><body id="brt" class="nojs nojswin bxSngl bxAllBlog bxPost bxP-base-js-file bxP-id82 bxPC-behind-the-websites bxPTag-javascript bxPA-peter"><div id="pageWrap" class="brt"><div id="header"><div id="siteDetails"><p id="siteName"><a href="http://bigredtin.com"><img src="http://assets.sgiant.com/pressgiant/wp-content/themes/bigredtin/assets/child/i/logo-white-24.png" class="screen" width="323" height="90" alt="Big Red Tin  | Thoughts about the web and business from the large pantry" title="Big Red Tin | Thoughts about the web and business from the large pantry" /><img src="http://assets.sgiant.com/pressgiant/wp-content/themes/bigredtin/assets/child/i/logo-colour-24.png" class="print" width="323" height="90" alt="" title="" /></a></p></div><div id="headerWidgets"></div></div><div id="container"><div id="navWrap" class="navWrap"></div><div id="content"><div id="contentHeadA" class="hentry p1 post publish post-base-js-file author-peter-wilson cat-behind-the-websites tagged tag-javascript"><div id="contentHead"><h1 class="entry-title" id="pageName"> <a href="/behind-the-websites/base-js-file/" title="Base JavaScript File" rel="bookmark"> Base JavaScript File </a></h1><p class="entry-date"><span class="published" title="2008-12-08T12:34:48+00:00">8 Dec '08</span></p></div><div id="contentA"><div class="entry-meta"><p class="details"> <span class="author vcard">By <a class="url fn n" href="/author/peter/" title="View all posts by Peter Wilson">Peter Wilson</a></span> <span class="cat-links"> in <a href="/behind-the-websites/" title="View all posts in Behind the Websites" rel="category tag">Behind the Websites</a></span></p><p class="comments-link"> Responses are closed</p></div><div class="entry-content"><p>Upcoming posts on JavaScript will include references to functions in my base JavaScript file; rather than explain these functions each time, they&#8217;ll be detailed in this post for future reference.</p><p>There are many pre-written JavaScript examples and functions available, so it&#8217;s important to note that all of these functions have been written by others, some include slight changes; all moved to the namespace PWCC, as you&#8217;ll see in the <a title="base.js code" href="http://code.peterwilson.cc/base-js-file/base.js.txt" onclick="javascript:_gaq.push(['_trackEvent','outbound-article','code.peterwilson.cc/base-js-file/base.js.txt']);">source code</a>.</p><p><span id="more-82"></span></p><p>In the code listings below, I&#8217;ve made the changes before moving the functions to move the PWCC namespace, to keep these listings a close to the original source code as possible.</p><h4>Functions: Domready, readyState, onReady</h4><p>These are taken from <a title="Geek Daily - window onload Is Bad M?kay" href="http://www.geekdaily.net/2007/07/27/javascript-windowonload-is-bad-mkay/" onclick="javascript:_gaq.push(['_trackEvent','outbound-article','www.geekdaily.net/2007/07/27/javascript-windowonload-is-bad-mkay/']);">Geek Daily</a> to fire JavaScript events once the DOM loads, rather than waiting for images to load and the onload event to fire. Geek Daily is altered to pass a call onReady() to the event, rather than a copy, so I can use a further function to add events as needed.</p><pre><code>window.onDomReady(onReady);

//becomes

window.onDomReady(function() {
onReady();
});</code></pre><h4>Functions: addLoadEvent, addDomEvent</h4><p>addLoadEvent() is <a title="Simon Willison?s Weblog - Executing JavaScript on page load" href="http://simonwillison.net/2004/May/26/addLoadEvent/" onclick="javascript:_gaq.push(['_trackEvent','outbound-article','simonwillison.net/2004/May/26/addLoadEvent/']);">Simon Willison&#8217;s script</a> to add events to the onload event, the only change is to move it to the PWCC namespace; addDomEvent() is the same script again, but changes the onReady() function.</p><h4>Functions: hasClass, addClass, removeClass</h4><p>Again no changes have are made to these scripts except to move them to the PWCC name space, they originate in <a title="Simply JavaScript - SitePoint Books" href="http://www.sitepoint.com/books/javascript1/" onclick="javascript:_gaq.push(['_trackEvent','outbound-article','www.sitepoint.com/books/javascript1/']);">Simply JavaScript, published by SitePoint</a>.</p><h4>Function: getElementsByClass</h4><p>Taken from <a title="The JavaScript Source - getElementsByClass" href="http://javascript.internet.com/snippets/getelementsbyclass.html" onclick="javascript:_gaq.push(['_trackEvent','outbound-article','javascript.internet.com/snippets/getelementsbyclass.html']);">The JavaScript Source</a>, <code>var</code> is added to a variable declaration to move the variables from the global to the local scope. The order in which the node and tag variables are passed to a function is reversed, as it&#8217;s more likely I&#8217;ll search by tag than a particular node; in practice I usually specify both. Finally, the default node has become the body element rather than the document node.</p><pre><code>getElementsByClass (searchClass,node, tag) {
//becomes
getElementsByClass (searchClass,tag,node) {

//and

if (node == null)
node = document;
//becomes
if (node == null)
node = document.getElementsByTagName("body")[0];

//and

for (i = 0, j = 0; i &lt; elsLen; i++) {
//becomes
for (var i = 0, j = 0; i &lt; elsLen; i++) {</code></pre><h4>Keeping it short and simple</h4><p>I realise I could have used an existing frame work, such as the increasingly popular <a title="jQuery" href="http://jquery.com/" onclick="javascript:_gaq.push(['_trackEvent','outbound-article','jquery.com/']);">jQuery</a>; I decided to use my own, which contains only the very basics, rather than have a larger file containing rarely used functions. For the time being I&#8217;m happy using my 1.34K &#8211; minimised &#8211; file.</p><p>If I find myself using other functions on most sites I develop, I&#8217;ll add them to this file; I&#8217;m already thinking of updating the dom load event functions to something more robust, when I do, I&#8217;ll to keep the function calls the same for backward compatibility.</p><h4>Update</h4><p>Since writing this article, I have <a title="reviewed my stance on JavaScript libraries" href="/behind-the-websites/partying-like-its-1999/" >reviewed my stance on JavaScript libraries</a> and now use jQuery.</p></div><p class="tag-links entry-meta">Tagged: <a href="/tag/javascript/" rel="tag">JavaScript</a></p><div id="authorDescription" class="author-description vcard"> <img alt='' src='http://1.gravatar.com/avatar/d6fa5fdcd09cd9484ebca5c0844cc13b?s=96&amp;d=http%3A%2F%2Fbigredtin.com%2Fwp-includes%2Fimages%2Fblank.gif&amp;r=G' class='avatar avatar-96 photo' height='96' width='96' /><h2>About<cite class="fn"> Peter Wilson</cite></h2><p>Peter Wilson is a Web Developer based in Melbourne, Australia. He co-founded Web Production firm <a href="http://soupgiant.com/" title="Soupgiant">Soupgiant</a> with Josh Kinal in October 2009.</p></div><div id="page-nav" class="page-nav nav"><div class="page-nav-older"><span class="direction">Previous post: </span><a href="/behind-the-websites/review-everything-you-know-about-css-is-wrong/" rel="prev">Review &#8211; Everything you know about CSS is wrong!</a></div><div class="page-nav-newer"><span class="direction">Next post: </span><a href="/behind-the-websites/js-equal-height-cols/" rel="next">JavaScript Equal Height Columns</a></div></div><div id="comments"></div></div></div></div><div id="contentC" class="sidebar"><div id="search-3" class="widget widget_search"><form method="get" action="http://bigredtin.com" class="search-form"><div> <label for="s-500633" class="search-label">Search this Site</label> <input type="text" name="s" id="s-500633" class="searchInput inputText" /> <input type="submit" value="Search" class="searchSubmit inputSubmit" /></div></form></div><div id="twitter-tools" class="widget aktt_widget"><h5 class="widget-title">Tasty Tweets</h5><div class="aktt_tweets"><ul><li>We received a flyer in the mail this morning that read  &quot;Websites from $199.&quot;  I was reminded of this post : <a href="http://bit.ly/buzxl4" onclick="javascript:_gaq.push(['_trackEvent','outbound-article','bit.ly/buzxl4']);" rel="nofollow">http://bit.ly/buzxl4</a> ^JK <a href="http://twitter.com/bigredtin/statuses/30401309957951488" onclick="javascript:_gaq.push(['_trackEvent','outbound-article','twitter.com/bigredtin/statuses/30401309957951488']);" class="aktt_tweet_time">3 days ago</a></li><li>When people say they want an iPhone app, I show them @<a href="http://twitter.com/movietimesapp" onclick="javascript:_gaq.push(['_trackEvent','outbound-article','twitter.com/movietimesapp']);" class="aktt_username">movietimesapp</a> to find out if they NEED an iPhone app. ^pw <a href="http://twitter.com/bigredtin/statuses/28970843694440448" onclick="javascript:_gaq.push(['_trackEvent','outbound-article','twitter.com/bigredtin/statuses/28970843694440448']);" class="aktt_tweet_time">1 week ago</a></li><li>RT @<a href="http://twitter.com/zakiwarfel" onclick="javascript:_gaq.push(['_trackEvent','outbound-article','twitter.com/zakiwarfel']);" class="aktt_username">zakiwarfel</a>: If there was ever a question that good design and usability mattered, just look at the collapse of @<a href="http://twitter.com/myspace" onclick="javascript:_gaq.push(['_trackEvent','outbound-article','twitter.com/myspace']);" class="aktt_username">myspace</a>. <a href="http://twitter.com/bigredtin/statuses/24925589097947136" onclick="javascript:_gaq.push(['_trackEvent','outbound-article','twitter.com/bigredtin/statuses/24925589097947136']);" class="aktt_tweet_time">2 weeks ago</a></li><li class="aktt_more_updates"><a href="http://twitter.com/bigredtin">More updates...</a></li></ul></div></div><div id="text-4" class="widget widget_text"><h5 class="widget-title">B.R.T. by Soupgiant</h5><div class="textwidget"><p>Big Red Tin is presented by <a href="http://soupgiant.com" onclick="javascript:_gaq.push(['_trackEvent','outbound-widget','soupgiant.com']);"><strong>Soupgiant</strong></a>.</p><p>The philosophy is simple: <strong>Good content presented in the most efficient, user-friendly and accessible way possible</strong>.</p></div></div></div></div><div id="footer"><div id="footWidgets"><div id="recent-posts-3" class="foot-widget widget widget_recent_entries"><h5 class="widget-title">Recent Posts</h5><ul><li><a href="/design/details-prevent-user-paralysis/" title="Details Prevent User Paralysis">Details Prevent User Paralysis</a></li><li><a href="/quick-notes/caching-google-webfont-loader/" title="Caching Google&#8217;s WebFont Loader">Caching Google&#8217;s WebFont Loader</a></li><li><a href="/quick-notes/soupgiant-wordpress-themes-github/" title="Soupgiant WordPress themes on Github">Soupgiant WordPress themes on Github</a></li><li><a href="/behind-the-websites/html5-couldnt-do-it/" title="HTML5: I couldn&#8217;t (quite) do it">HTML5: I couldn&#8217;t (quite) do it</a></li><li><a href="/quick-notes/branding-is-hard/" title="Branding is hard">Branding is hard</a></li></ul></div><div id="categories-3" class="foot-widget widget widget_categories"><h5 class="widget-title">Categories</h5><ul><li class="cat-item cat-item-557"><a href="/behind-the-websites/" title="Everything to do with website coding that we can think of. Front-end, back-end, upside and down, you&#039;ll find it here. It also contains our thoughts about Content Management Systems (CMS) and all the other little and technical things.">Behind the Websites</a></li><li class="cat-item cat-item-31"><a href="/business/" title="Producing websites is, in itself a business, but it often relates to the business of our clients. We&#039;ll try to put all of those thoughts and processes in here.">Business</a></li><li class="cat-item cat-item-540"><a href="/content-strategy/" title="Content whosawhatnow? When producing websites it&#039;s really important to think about what information you&#039;re going to provide, how it&#039;s going to be displayed and how is it going to affect your audience. That&#039;s content strategy in a nutshell. This is where we crack that nut.">Content Strategy</a></li><li class="cat-item cat-item-54"><a href="/design/" title="Design is so much more than just the graphics. A lot of thought goes in to how something looks, where elements are placed, what does and doesn&#039;t appear and when. You&#039;ll find that information here.">Design</a></li><li class="cat-item cat-item-4574"><a href="/quick-notes/" title="Just like it sounds. This is where we post clippings of interesting things we&#039;ve found (code, opinions, writings, pictures) that deal with all aspects of making the web. We found them interesting. You don&#039;t have to.">Quick Notes</a></li></ul></div><div id="linkcat-530" class="foot-widget widget widget_links"><h5 class="widget-title">Handy Links</h5><ul class='xoxo blogroll'><li><a href="/about/" rel="me" title="About Big Red Tin">About Big Red Tin</a></li><li><a href="http://twitter.com/bigredtin" rel="me" title="Follow Big Red Tin on Twitter" target="" onclick="javascript:_gaq.push(['_trackEvent','outbound-blogroll','http://twitter.com/bigredtin']);">Follow us on Twitter</a></li><li><a href="/contact" rel="me" title="Get in Contact">Get in Contact</a></li><li><a href="http://feeds.soupgiant.com/bigredtin" rel="me" title="Subscribe to Big Red Tin in your feed reader" target="" onclick="javascript:_gaq.push(['_trackEvent','outbound-blogroll','http://feeds.soupgiant.com/bigredtin']);">Subscribe by RSS</a></li><li><a href="/plugins-themes/" rel="me">WordPress Plugins &amp; Themes</a></li></ul></div><div id="text-3" class="foot-widget widget widget_text"><h5 class="widget-title">Side Credits</h5><div class="textwidget"><ul><li class="copyright">Copyright &copy; 2009 - 2010 <a href="http://soupgiant.com/" onclick="javascript:_gaq.push(['_trackEvent','outbound-widget','soupgiant.com/']);">Soupgiant</a></li><li class="credits credits-dev">Developed by <a href="http://soupgiant.com/" onclick="javascript:_gaq.push(['_trackEvent','outbound-widget','soupgiant.com/']);">Soupgiant</a></li><li class="credits credits-design">Design by <a href="http://zepol.com.au/" onclick="javascript:_gaq.push(['_trackEvent','outbound-widget','zepol.com.au/']);">Zepol</a></li><li class="powered">Inevitably powered by <a href="http://wordpress.org" onclick="javascript:_gaq.push(['_trackEvent','outbound-widget','wordpress.org']);">WordPress</a></li></ul></div></div></div></div></div>  <script type='text/javascript'>try{jQuery.noConflict();}catch(e){};</script> <script type='text/javascript' src='http://assets.sgiant.com/pressgiant/wp-content/themes/soup02/assets/parent/j/sg-base-min.js?ver=1.1.0'></script> <script type='text/javascript' src='http://assets.sgiant.com/pressgiant/wp-content/themes/bigredtin/assets/child/j/custom-min.js?ver=1.0.0'></script> <script type='text/javascript' src='/wp-content/plugins/contact-form-7/jquery.form.js?ver=2.47'></script> <script type='text/javascript' src='/wp-content/plugins/contact-form-7/scripts.js?ver=2.4.2'></script> <script src="https://stats.wordpress.com/e-201104.js" type="text/javascript"></script> <script type="text/javascript">st_go({blog:'13871010',v:'ext',post:'82'});var load_cmc=function(){linktracker_init(13871010,82,2);};if(typeof addLoadEvent!='undefined')addLoadEvent(load_cmc);else load_cmc();</script> <!--[if IE 6]> <script type='text/javascript' src='http://assets.sgiant.com/pressgiant/wp-content/themes/soup02/assets/parent/j/ddbelatedpng-min.js'></script> <script type="text/javascript">if(typeof jQuery=="function"){jQuery(window).ready(function(){DD_belatedPNG.fix('img');});}else{DD_belatedPNG.fix('img');}</script> <![endif]--></body></html>
<!-- Performance optimized by W3 Total Cache. Learn more: http://www.w3-edge.com/wordpress-plugins/

Minified using disk
Page Caching using disk (enhanced)
Content Delivery Network via assets.sgiant.com/pressgiant

Served from: bigredtin.com @ 2011-01-30 21:20:22 -->